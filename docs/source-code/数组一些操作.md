## 数组一些操作

### map 的实现

```js
// es 5 map 方法
function myMap(fn, context) {
  let arr = Array.prototype.slice.call(this)
  let mapedArr = []
  for (let i = 0; i < arr.length; i++) {
    if (!arr.hasOwnProperty(i)) continue
    mapedArr.push(fn.call(context, arr[i], i, this))
  }
  return mapedArr
}
```

### 数组乱序

```js
sort + Math.random() - 0.5
```

```js
/**
 *	数组乱序
 * 	从最后开始，和生成的随机数序号调换位置，知道第一个
 */

function initOrder(arr) {
  let len = arr.length
  let cur = len - 1
  let random
  while (cur > -1) {
    random = Math.floor(Math.random() * len)[(arr[cur], arr[random])] = [
      arr[random],
      arr[cur],
    ]
    cur--
  }
  return arr
}
```

### 高阶方法

- 数组的 filter 方法

```js
function myFilter(fn, context) {
  let arr = Array.prototype.slice.call(this)
  let filterArr = []

  for (let i = 0; i < arr.length; i++) {
    if (!arr.hasOwnProperty(i)) continue
    fn.call(context, arr[i], i, this) && filterArr.push(arr[i])
  }

  return filterArr
}
```

- 数组的 some 方法

```js
function mySome() {
  let arr = Array.prototype.slice.call(this)
  if (!arr.length) return false

  for (let i = 0; i < arr.length; i++) {
    if (!arr.hasOwnProperty(i)) continue
    let res = fn.call(context, arr[i], i, this)

    if (res) return true
  }
  return false
}
```
